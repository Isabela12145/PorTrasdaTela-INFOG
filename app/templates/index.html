<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Por Tr√°s da Tela ‚Äì Era Digital</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #f8f9fc;
        color: #333;
      }
      .navbar {
        background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
      }
      .navbar-brand {
        font-weight: 700;
        font-size: 1.4rem;
        color: #fff !important;
      }
      .hero {
        background: linear-gradient(90deg, #2575fc 0%, #6a11cb 100%);
        color: white;
        text-align: center;
        padding: 90px 20px;
      }
      section {
        padding: 70px 20px;
      }
      .feature-icon {
        font-size: 40px;
        color: #6a11cb;
      }
      footer {
        background: #111;
        color: white;
        padding: 30px 0;
        text-align: center;
      }
      footer a {
        color: #9ad0ff;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="#">Por Tr√°s da Tela</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#sobre">Sobre</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#funcionalidades">Funcionalidades</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#equipe">Equipe</a>
            </li>
            {% if user.is_authenticated %}
              <li class="nav-item dropdown ms-2">
                <a class="nav-link dropdown-toggle d-flex align-items-center text-light" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bi bi-person-circle me-2" style="font-size: 1.4rem;"></i>
                  {{ user.username }}
                </a>

                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="#"><i class="bi bi-person-lines-fill me-2"></i> Perfil</a>
                  </li>

                  <li>
                    <hr class="dropdown-divider" />
                  </li>

                  <li>
                    <a class="dropdown-item text-danger" href="/logout/"><i class="bi bi-box-arrow-right me-2"></i> Sair</a>
                  </li>
                </ul>
              </li>
            {% else %}
              <li class="nav-item ms-2">
                <a class="btn btn-light text-dark px-3" href="/login/">Login</a>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- Bot√µes para entrar no sistema -->
    <section class="container text-center mt-5">
      <h2 class="mb-4">Acesse o Sistema</h2>
      <div class="d-flex flex-wrap justify-content-center gap-3">
        <a href="/diario/" class="btn btn-outline-primary px-4 py-2">Di√°rio Emocional</a>
        <a href="/conteudoed/" class="btn btn-outline-primary px-4 py-2">Conte√∫do Educativo</a>
        <a href="/ranking/" class="btn btn-outline-primary px-4 py-2">Ranking</a>
        <a href="/desafio/" class="btn btn-outline-primary px-4 py-2">Desafios</a>
      </div>
    </section>

    <!-- Hero -->
    <section class="hero">
      <h1>Por Tr√°s da Tela</h1>
      <p>O impacto da vida digital na sa√∫de mental e f√≠sica ‚Äì repense seu tempo online!</p>
      <a href="#funcionalidades" class="btn btn-light btn-lg mt-4">Explorar o Projeto</a>
    </section>

    <!-- Sobre -->
    <section id="sobre" class="container">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h2>Sobre o Projeto</h2>
          <p>
            O <strong>Por Tr√°s da Tela</strong> √© uma plataforma educativa desenvolvida pelo grupo
            <em>CTRL Vida</em> (Info-G ‚Äì IFSULDEMINAS, Campus Muzambinho), com o objetivo de conscientizar os jovens sobre o impacto da tecnologia na sa√∫de mental e f√≠sica.
          </p>
        </div>
        <div class="col-md-6 text-center">
          <img src="https://cdn-icons-png.flaticon.com/512/1055/1055646.png" alt="Imagem tecnologia" class="img-fluid w-75" />
        </div>
      </div>
    </section>

    <!-- Funcionalidades -->
    <section id="funcionalidades" class="bg-light">
      <div class="container text-center">
        <h2 class="mb-5">Principais Funcionalidades</h2>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="card p-4 shadow-sm h-100">
              <div class="feature-icon mb-3">üí¨</div>
              <h5>Diario Emocional</h5>
              <p>Monitore seu bem-estar digital.</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card p-4 shadow-sm h-100">
              <div class="feature-icon mb-3">‚è∞</div>
              <h5>Alertas de Tempo</h5>
              <p>Receba lembretes de uso saud√°vel.</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card p-4 shadow-sm h-100">
              <div class="feature-icon mb-3">üèÜ</div>
              <h5>Desafios</h5>
              <p>Equil√≠brio digital com gamifica√ß√£o.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Equipe -->
    <section id="equipe" class="container">
      <h2 class="text-center mb-5">Equipe CTRL Vida</h2>
      <div class="row text-center">
        <div class="col-md-4">
          <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="120" class="mb-3 rounded-circle" alt="" />
          <h5>Isabela</h5>
          <p>Front-end</p>
        </div>
        <div class="col-md-4">
          <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="120" class="mb-3 rounded-circle" alt="" />
          <h5>Raul Fernando</h5>
          <p>Back-end</p>
        </div>
        <div class="col-md-4">
          <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="120" class="mb-3 rounded-circle" alt="" />
          <h5>Mel Palos Lima</h5>
          <p>Documenta√ß√£o & Design</p>
        </div>
      </div>
    </section>

    <!-- Exemplo de formul√°rio de login (use este ou similar em login.html) -->
    <!-- 
    IMPORTANTE:
    - No template Django real, coloque {% csrf_token %} dentro do <form>.
    - A view Django deve validar e REDIRECIONAR para /dashboard/ em caso de sucesso.
   -->
    <section class="container mt-5">
      <h3>Exemplo: Formul√°rio de Login</h3>
      <form action="/login/" method="post" class="col-md-6 p-4" data-redirect="/dashboard/">
        <!-- Se for template Django, inclua: {% csrf_token %} -->
        <div class="mb-3">
          <label for="username" class="form-label">Usu√°rio</label>
          <input id="username" name="username" class="form-control" required />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Senha</label>
          <input id="password" name="password" type="password" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary">Entrar</button>
        <small class="d-block mt-2 text-muted">Obs.: o redirecionamento por JS √© um fallback; o correto √© o backend redirecionar ap√≥s login.</small>
      </form>
    </section>

    <!-- Script corrigido -->
    <script>
      /**
       * Comportamento:
       * - Para qualquer form com atributo data-redirect, mantemos o envio normal.
       * - Se o servidor REDIRECIONAR (resposta 302), o navegador vai seguir.
       * - Se o servidor N√ÉO redirecionar (ex: formul√°rio que s√≥ salva e retorna a mesma p√°gina),
       *   o JS faz um fallback e redireciona para o destino ap√≥s 700ms.
       *
       * Importante: N√ÉO force redirect client-side em formul√°rios de login/autentica√ß√£o
       * se voc√™ precisa aguardar valida√ß√£o do servidor ‚Äî o ideal √© que a view do Django redirecione.
       */
      document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('form[data-redirect]').forEach(function (form) {
          form.addEventListener('submit', function () {
            const destino = form.getAttribute('data-redirect') || '/'
            // fallback: se o servidor n√£o redirecionar, n√≥s redirecionamos ap√≥s um tempo curto
            // n√£o chamamos event.preventDefault() para n√£o bloquear o envio real
            setTimeout(function () {
              // s√≥ redireciona se ainda estivermos na mesma p√°gina (verifica pathname)
              // isso evita sobrescrever um redirecionamento do servidor
              if (window.location.pathname !== destino) {
                // Se destino for uma url relativa, navegamos para ela
                window.location.href = destino
              }
            }, 700)
          })
        })
      })
    </script>

    <footer>
      <p>¬© 2025 Por Tr√°s da Tela ‚Äì CTRL Vida.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
